// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.Aiven
{
    /// <summary>
    /// Creates and manages [customer managed keys](https://aiven.io/docs/platform/howto/bring-your-own-key) (CMKs) for encrypting service data. Use your own CMKs from your cloud provider's key management service (KMS) to encrypt data for all services in an Aiven project. This gives you complete control over your encryption keys, meaning you can independently manage the key lifecycle and access policies.
    /// 
    /// **This resource is in the beta stage and may change without notice.** Set
    /// the `PROVIDER_AIVEN_ENABLE_BETA` environment variable to use the resource.
    /// 
    /// &gt; **Warning**
    /// If you remove a CMK, the services linked to the key will stop working. Migrate the services to another CMK or an Aiven-managed key before removing the CMK.
    /// 
    /// ## Example Usage
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using Aiven = Pulumi.Aiven;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     var exampleUser = new Aiven.Cmk("example_user", new()
    ///     {
    ///         Project = aivenProjectName,
    ///         Resource = cmkResource,
    ///         CmkProvider = "gcp",
    ///         DefaultCmk = false,
    ///     });
    /// 
    /// });
    /// ```
    /// 
    /// ## Import
    /// 
    /// ```sh
    /// $ pulumi import aiven:index/cmk:Cmk example PROJECT/CMK_ID
    /// ```
    /// </summary>
    [AivenResourceType("aiven:index/cmk:Cmk")]
    public partial class Cmk : global::Pulumi.CustomResource
    {
        /// <summary>
        /// Customer Managed Key identifier (CMK ID).
        /// </summary>
        [Output("cmkId")]
        public Output<string> CmkId { get; private set; } = null!;

        /// <summary>
        /// The cloud provider hosting the key management service (KMS). The possible values are `Aws`, `Gcp` and `Oci`. Changing this property forces recreation of the resource.
        /// </summary>
        [Output("cmkProvider")]
        public Output<string> CmkProvider { get; private set; } = null!;

        /// <summary>
        /// Created At.
        /// </summary>
        [Output("createdAt")]
        public Output<string> CreatedAt { get; private set; } = null!;

        /// <summary>
        /// Mark the created CMK as default for all newly created services.
        /// </summary>
        [Output("defaultCmk")]
        public Output<bool> DefaultCmk { get; private set; } = null!;

        /// <summary>
        /// Project name. Changing this property forces recreation of the resource.
        /// </summary>
        [Output("project")]
        public Output<string> Project { get; private set; } = null!;

        /// <summary>
        /// The unique identifier for the CMK in the cloud provider's KMS. In AWS, this is the Key ARN; in Google Cloud the Resource Name; and in Oracle Cloud the Key OCID. Maximum length: `512`. Changing this property forces recreation of the resource.
        /// </summary>
        [Output("resource")]
        public Output<string> Resource { get; private set; } = null!;

        /// <summary>
        /// Status. The possible values are `Current`, `Deleted` and `Old`.
        /// </summary>
        [Output("status")]
        public Output<string> Status { get; private set; } = null!;

        [Output("timeouts")]
        public Output<Outputs.CmkTimeouts?> Timeouts { get; private set; } = null!;

        /// <summary>
        /// Updated At.
        /// </summary>
        [Output("updatedAt")]
        public Output<string> UpdatedAt { get; private set; } = null!;


        /// <summary>
        /// Create a Cmk resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public Cmk(string name, CmkArgs args, CustomResourceOptions? options = null)
            : base("aiven:index/cmk:Cmk", name, args ?? new CmkArgs(), MakeResourceOptions(options, ""))
        {
        }

        private Cmk(string name, Input<string> id, CmkState? state = null, CustomResourceOptions? options = null)
            : base("aiven:index/cmk:Cmk", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing Cmk resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static Cmk Get(string name, Input<string> id, CmkState? state = null, CustomResourceOptions? options = null)
        {
            return new Cmk(name, id, state, options);
        }
    }

    public sealed class CmkArgs : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// The cloud provider hosting the key management service (KMS). The possible values are `Aws`, `Gcp` and `Oci`. Changing this property forces recreation of the resource.
        /// </summary>
        [Input("cmkProvider", required: true)]
        public Input<string> CmkProvider { get; set; } = null!;

        /// <summary>
        /// Mark the created CMK as default for all newly created services.
        /// </summary>
        [Input("defaultCmk", required: true)]
        public Input<bool> DefaultCmk { get; set; } = null!;

        /// <summary>
        /// Project name. Changing this property forces recreation of the resource.
        /// </summary>
        [Input("project", required: true)]
        public Input<string> Project { get; set; } = null!;

        /// <summary>
        /// The unique identifier for the CMK in the cloud provider's KMS. In AWS, this is the Key ARN; in Google Cloud the Resource Name; and in Oracle Cloud the Key OCID. Maximum length: `512`. Changing this property forces recreation of the resource.
        /// </summary>
        [Input("resource", required: true)]
        public Input<string> Resource { get; set; } = null!;

        [Input("timeouts")]
        public Input<Inputs.CmkTimeoutsArgs>? Timeouts { get; set; }

        public CmkArgs()
        {
        }
        public static new CmkArgs Empty => new CmkArgs();
    }

    public sealed class CmkState : global::Pulumi.ResourceArgs
    {
        /// <summary>
        /// Customer Managed Key identifier (CMK ID).
        /// </summary>
        [Input("cmkId")]
        public Input<string>? CmkId { get; set; }

        /// <summary>
        /// The cloud provider hosting the key management service (KMS). The possible values are `Aws`, `Gcp` and `Oci`. Changing this property forces recreation of the resource.
        /// </summary>
        [Input("cmkProvider")]
        public Input<string>? CmkProvider { get; set; }

        /// <summary>
        /// Created At.
        /// </summary>
        [Input("createdAt")]
        public Input<string>? CreatedAt { get; set; }

        /// <summary>
        /// Mark the created CMK as default for all newly created services.
        /// </summary>
        [Input("defaultCmk")]
        public Input<bool>? DefaultCmk { get; set; }

        /// <summary>
        /// Project name. Changing this property forces recreation of the resource.
        /// </summary>
        [Input("project")]
        public Input<string>? Project { get; set; }

        /// <summary>
        /// The unique identifier for the CMK in the cloud provider's KMS. In AWS, this is the Key ARN; in Google Cloud the Resource Name; and in Oracle Cloud the Key OCID. Maximum length: `512`. Changing this property forces recreation of the resource.
        /// </summary>
        [Input("resource")]
        public Input<string>? Resource { get; set; }

        /// <summary>
        /// Status. The possible values are `Current`, `Deleted` and `Old`.
        /// </summary>
        [Input("status")]
        public Input<string>? Status { get; set; }

        [Input("timeouts")]
        public Input<Inputs.CmkTimeoutsGetArgs>? Timeouts { get; set; }

        /// <summary>
        /// Updated At.
        /// </summary>
        [Input("updatedAt")]
        public Input<string>? UpdatedAt { get; set; }

        public CmkState()
        {
        }
        public static new CmkState Empty => new CmkState();
    }
}

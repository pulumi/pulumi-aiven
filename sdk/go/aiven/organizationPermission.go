// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package aiven

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-aiven/sdk/v6/go/aiven/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Grants [roles and permissions](https://aiven.io/docs/platform/concepts/permissions) to a principal for a resource. Permissions can be granted at the organization, organizational unit, and project level. Unit-level permissions aren't shown in the Aiven Console. To assign permissions to multiple users and groups on the same combination of organization ID, resource ID and resource type, don't use multiple `OrganizationPermission` resources. Instead, use multiple permission blocks as in the example usage. **Do not use the `ProjectUser` or `OrganizationGroupProject` resources with this resource**. By default, Aiven Terraform Provider validates whether the resource already exists in the Aiven API. This validation prevents you from managing permissions for a specific resource using multiple `OrganizationGroupProject` resources, which leads to overwrites and conflicts. In case of a conflict, you can import the resource using the `pulumi import` command to continue managing it. Alternatively, you can disable this validation by setting the `AIVEN_ORGANIZATION_PERMISSION_VALIDATE_CONFLICT` environment variable to `false`, which will cause Terraform to override the remote state.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-aiven/sdk/v6/go/aiven"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			// Grant access to a specific project
//			_, err := aiven.NewOrganizationPermission(ctx, "example_project_permissions", &aiven.OrganizationPermissionArgs{
//				OrganizationId: pulumi.Any(main.Id),
//				ResourceId:     pulumi.Any(exampleProject.Project),
//				ResourceType:   pulumi.String("project"),
//				Permissions: aiven.OrganizationPermissionPermissionArray{
//					&aiven.OrganizationPermissionPermissionArgs{
//						Permissions: pulumi.StringArray{
//							pulumi.String("operator"),
//							pulumi.String("service:logs:read"),
//						},
//						PrincipalId:   pulumi.String("u123a456b7890c"),
//						PrincipalType: pulumi.String("user"),
//					},
//					&aiven.OrganizationPermissionPermissionArgs{
//						Permissions: pulumi.StringArray{
//							pulumi.String("project:integrations:write"),
//							pulumi.String("developer"),
//						},
//						PrincipalId:   pulumi.Any(exampleGroup.GroupId),
//						PrincipalType: pulumi.String("user_group"),
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			// Organization-level permissions
//			_, err = aiven.NewOrganizationPermission(ctx, "example_org_permissions", &aiven.OrganizationPermissionArgs{
//				OrganizationId: pulumi.Any(main.Id),
//				ResourceId:     pulumi.Any(main.Id),
//				ResourceType:   pulumi.String("organization"),
//				Permissions: aiven.OrganizationPermissionPermissionArray{
//					&aiven.OrganizationPermissionPermissionArgs{
//						Permissions: pulumi.StringArray{
//							pulumi.String("organization:app_users:write"),
//							pulumi.String("project:audit_logs:read"),
//						},
//						PrincipalId:   pulumi.String("u123a456b7890c"),
//						PrincipalType: pulumi.String("user"),
//					},
//					&aiven.OrganizationPermissionPermissionArgs{
//						Permissions: pulumi.StringArray{
//							pulumi.String("organization:users:write"),
//							pulumi.String("organization:groups:write"),
//							pulumi.String("organization:domains:write"),
//							pulumi.String("organization:idps:write"),
//						},
//						PrincipalId:   pulumi.Any(exampleGroupAivenOrganizationUserGroup.GroupId),
//						PrincipalType: pulumi.String("user_group"),
//					},
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// ```sh
// $ pulumi import aiven:index/organizationPermission:OrganizationPermission example ORGANIZATION_ID/RESOURCE_TYPE/RESOURCE_ID
// ```
type OrganizationPermission struct {
	pulumi.CustomResourceState

	// ID of an organization. Changing this property forces recreation of the resource.
	OrganizationId pulumi.StringOutput `pulumi:"organizationId"`
	// Required property. List of roles to set.
	Permissions OrganizationPermissionPermissionArrayOutput `pulumi:"permissions"`
	// Resource Id. Changing this property forces recreation of the resource.
	ResourceId pulumi.StringOutput `pulumi:"resourceId"`
	// Resource type. The possible values are `organization`, `organizationUnit` and `project`. Changing this property forces recreation of the resource.
	ResourceType pulumi.StringOutput                     `pulumi:"resourceType"`
	Timeouts     OrganizationPermissionTimeoutsPtrOutput `pulumi:"timeouts"`
}

// NewOrganizationPermission registers a new resource with the given unique name, arguments, and options.
func NewOrganizationPermission(ctx *pulumi.Context,
	name string, args *OrganizationPermissionArgs, opts ...pulumi.ResourceOption) (*OrganizationPermission, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.OrganizationId == nil {
		return nil, errors.New("invalid value for required argument 'OrganizationId'")
	}
	if args.Permissions == nil {
		return nil, errors.New("invalid value for required argument 'Permissions'")
	}
	if args.ResourceId == nil {
		return nil, errors.New("invalid value for required argument 'ResourceId'")
	}
	if args.ResourceType == nil {
		return nil, errors.New("invalid value for required argument 'ResourceType'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource OrganizationPermission
	err := ctx.RegisterResource("aiven:index/organizationPermission:OrganizationPermission", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetOrganizationPermission gets an existing OrganizationPermission resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetOrganizationPermission(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *OrganizationPermissionState, opts ...pulumi.ResourceOption) (*OrganizationPermission, error) {
	var resource OrganizationPermission
	err := ctx.ReadResource("aiven:index/organizationPermission:OrganizationPermission", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering OrganizationPermission resources.
type organizationPermissionState struct {
	// ID of an organization. Changing this property forces recreation of the resource.
	OrganizationId *string `pulumi:"organizationId"`
	// Required property. List of roles to set.
	Permissions []OrganizationPermissionPermission `pulumi:"permissions"`
	// Resource Id. Changing this property forces recreation of the resource.
	ResourceId *string `pulumi:"resourceId"`
	// Resource type. The possible values are `organization`, `organizationUnit` and `project`. Changing this property forces recreation of the resource.
	ResourceType *string                         `pulumi:"resourceType"`
	Timeouts     *OrganizationPermissionTimeouts `pulumi:"timeouts"`
}

type OrganizationPermissionState struct {
	// ID of an organization. Changing this property forces recreation of the resource.
	OrganizationId pulumi.StringPtrInput
	// Required property. List of roles to set.
	Permissions OrganizationPermissionPermissionArrayInput
	// Resource Id. Changing this property forces recreation of the resource.
	ResourceId pulumi.StringPtrInput
	// Resource type. The possible values are `organization`, `organizationUnit` and `project`. Changing this property forces recreation of the resource.
	ResourceType pulumi.StringPtrInput
	Timeouts     OrganizationPermissionTimeoutsPtrInput
}

func (OrganizationPermissionState) ElementType() reflect.Type {
	return reflect.TypeOf((*organizationPermissionState)(nil)).Elem()
}

type organizationPermissionArgs struct {
	// ID of an organization. Changing this property forces recreation of the resource.
	OrganizationId string `pulumi:"organizationId"`
	// Required property. List of roles to set.
	Permissions []OrganizationPermissionPermission `pulumi:"permissions"`
	// Resource Id. Changing this property forces recreation of the resource.
	ResourceId string `pulumi:"resourceId"`
	// Resource type. The possible values are `organization`, `organizationUnit` and `project`. Changing this property forces recreation of the resource.
	ResourceType string                          `pulumi:"resourceType"`
	Timeouts     *OrganizationPermissionTimeouts `pulumi:"timeouts"`
}

// The set of arguments for constructing a OrganizationPermission resource.
type OrganizationPermissionArgs struct {
	// ID of an organization. Changing this property forces recreation of the resource.
	OrganizationId pulumi.StringInput
	// Required property. List of roles to set.
	Permissions OrganizationPermissionPermissionArrayInput
	// Resource Id. Changing this property forces recreation of the resource.
	ResourceId pulumi.StringInput
	// Resource type. The possible values are `organization`, `organizationUnit` and `project`. Changing this property forces recreation of the resource.
	ResourceType pulumi.StringInput
	Timeouts     OrganizationPermissionTimeoutsPtrInput
}

func (OrganizationPermissionArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*organizationPermissionArgs)(nil)).Elem()
}

type OrganizationPermissionInput interface {
	pulumi.Input

	ToOrganizationPermissionOutput() OrganizationPermissionOutput
	ToOrganizationPermissionOutputWithContext(ctx context.Context) OrganizationPermissionOutput
}

func (*OrganizationPermission) ElementType() reflect.Type {
	return reflect.TypeOf((**OrganizationPermission)(nil)).Elem()
}

func (i *OrganizationPermission) ToOrganizationPermissionOutput() OrganizationPermissionOutput {
	return i.ToOrganizationPermissionOutputWithContext(context.Background())
}

func (i *OrganizationPermission) ToOrganizationPermissionOutputWithContext(ctx context.Context) OrganizationPermissionOutput {
	return pulumi.ToOutputWithContext(ctx, i).(OrganizationPermissionOutput)
}

// OrganizationPermissionArrayInput is an input type that accepts OrganizationPermissionArray and OrganizationPermissionArrayOutput values.
// You can construct a concrete instance of `OrganizationPermissionArrayInput` via:
//
//	OrganizationPermissionArray{ OrganizationPermissionArgs{...} }
type OrganizationPermissionArrayInput interface {
	pulumi.Input

	ToOrganizationPermissionArrayOutput() OrganizationPermissionArrayOutput
	ToOrganizationPermissionArrayOutputWithContext(context.Context) OrganizationPermissionArrayOutput
}

type OrganizationPermissionArray []OrganizationPermissionInput

func (OrganizationPermissionArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*OrganizationPermission)(nil)).Elem()
}

func (i OrganizationPermissionArray) ToOrganizationPermissionArrayOutput() OrganizationPermissionArrayOutput {
	return i.ToOrganizationPermissionArrayOutputWithContext(context.Background())
}

func (i OrganizationPermissionArray) ToOrganizationPermissionArrayOutputWithContext(ctx context.Context) OrganizationPermissionArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(OrganizationPermissionArrayOutput)
}

// OrganizationPermissionMapInput is an input type that accepts OrganizationPermissionMap and OrganizationPermissionMapOutput values.
// You can construct a concrete instance of `OrganizationPermissionMapInput` via:
//
//	OrganizationPermissionMap{ "key": OrganizationPermissionArgs{...} }
type OrganizationPermissionMapInput interface {
	pulumi.Input

	ToOrganizationPermissionMapOutput() OrganizationPermissionMapOutput
	ToOrganizationPermissionMapOutputWithContext(context.Context) OrganizationPermissionMapOutput
}

type OrganizationPermissionMap map[string]OrganizationPermissionInput

func (OrganizationPermissionMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*OrganizationPermission)(nil)).Elem()
}

func (i OrganizationPermissionMap) ToOrganizationPermissionMapOutput() OrganizationPermissionMapOutput {
	return i.ToOrganizationPermissionMapOutputWithContext(context.Background())
}

func (i OrganizationPermissionMap) ToOrganizationPermissionMapOutputWithContext(ctx context.Context) OrganizationPermissionMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(OrganizationPermissionMapOutput)
}

type OrganizationPermissionOutput struct{ *pulumi.OutputState }

func (OrganizationPermissionOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**OrganizationPermission)(nil)).Elem()
}

func (o OrganizationPermissionOutput) ToOrganizationPermissionOutput() OrganizationPermissionOutput {
	return o
}

func (o OrganizationPermissionOutput) ToOrganizationPermissionOutputWithContext(ctx context.Context) OrganizationPermissionOutput {
	return o
}

// ID of an organization. Changing this property forces recreation of the resource.
func (o OrganizationPermissionOutput) OrganizationId() pulumi.StringOutput {
	return o.ApplyT(func(v *OrganizationPermission) pulumi.StringOutput { return v.OrganizationId }).(pulumi.StringOutput)
}

// Required property. List of roles to set.
func (o OrganizationPermissionOutput) Permissions() OrganizationPermissionPermissionArrayOutput {
	return o.ApplyT(func(v *OrganizationPermission) OrganizationPermissionPermissionArrayOutput { return v.Permissions }).(OrganizationPermissionPermissionArrayOutput)
}

// Resource Id. Changing this property forces recreation of the resource.
func (o OrganizationPermissionOutput) ResourceId() pulumi.StringOutput {
	return o.ApplyT(func(v *OrganizationPermission) pulumi.StringOutput { return v.ResourceId }).(pulumi.StringOutput)
}

// Resource type. The possible values are `organization`, `organizationUnit` and `project`. Changing this property forces recreation of the resource.
func (o OrganizationPermissionOutput) ResourceType() pulumi.StringOutput {
	return o.ApplyT(func(v *OrganizationPermission) pulumi.StringOutput { return v.ResourceType }).(pulumi.StringOutput)
}

func (o OrganizationPermissionOutput) Timeouts() OrganizationPermissionTimeoutsPtrOutput {
	return o.ApplyT(func(v *OrganizationPermission) OrganizationPermissionTimeoutsPtrOutput { return v.Timeouts }).(OrganizationPermissionTimeoutsPtrOutput)
}

type OrganizationPermissionArrayOutput struct{ *pulumi.OutputState }

func (OrganizationPermissionArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*OrganizationPermission)(nil)).Elem()
}

func (o OrganizationPermissionArrayOutput) ToOrganizationPermissionArrayOutput() OrganizationPermissionArrayOutput {
	return o
}

func (o OrganizationPermissionArrayOutput) ToOrganizationPermissionArrayOutputWithContext(ctx context.Context) OrganizationPermissionArrayOutput {
	return o
}

func (o OrganizationPermissionArrayOutput) Index(i pulumi.IntInput) OrganizationPermissionOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *OrganizationPermission {
		return vs[0].([]*OrganizationPermission)[vs[1].(int)]
	}).(OrganizationPermissionOutput)
}

type OrganizationPermissionMapOutput struct{ *pulumi.OutputState }

func (OrganizationPermissionMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*OrganizationPermission)(nil)).Elem()
}

func (o OrganizationPermissionMapOutput) ToOrganizationPermissionMapOutput() OrganizationPermissionMapOutput {
	return o
}

func (o OrganizationPermissionMapOutput) ToOrganizationPermissionMapOutputWithContext(ctx context.Context) OrganizationPermissionMapOutput {
	return o
}

func (o OrganizationPermissionMapOutput) MapIndex(k pulumi.StringInput) OrganizationPermissionOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *OrganizationPermission {
		return vs[0].(map[string]*OrganizationPermission)[vs[1].(string)]
	}).(OrganizationPermissionOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*OrganizationPermissionInput)(nil)).Elem(), &OrganizationPermission{})
	pulumi.RegisterInputType(reflect.TypeOf((*OrganizationPermissionArrayInput)(nil)).Elem(), OrganizationPermissionArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*OrganizationPermissionMapInput)(nil)).Elem(), OrganizationPermissionMap{})
	pulumi.RegisterOutputType(OrganizationPermissionOutput{})
	pulumi.RegisterOutputType(OrganizationPermissionArrayOutput{})
	pulumi.RegisterOutputType(OrganizationPermissionMapOutput{})
}
